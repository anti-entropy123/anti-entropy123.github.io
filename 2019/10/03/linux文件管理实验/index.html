<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    <link rel="canonical" href="https://tjuyjn.top/2019/10/03/linux文件管理实验/">
    
    
    <title>操作系统的两次实验 | Anti-entropy&#39;s blog | 向一切虚伪的美好宣战</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="linux,文件系统,OS">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.css">
    <link rel="stylesheet" href="/css/style.css?v=1.4.2">

    
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":null,"app_id":"falsee1f779yetMaV1lNERajntYJH-gzGzoHsz","app_key":"CGROdujMx4Hw9l84Eysyhp7D","icon":true}'),
            v: JSON.parse('{"enable":true,"appid":"w6aWfPRvBTtEbBcUQVnWa1fl-MdYXbMMI","appkey":"96PaRwN0DWkNUdwQrWx3Ff7g","notify":true,"verify":true,"placeholder":"来和希儿一起玩吧 -- 记得告诉希儿你的昵称和邮箱哟","avatar":"retro"}'),
            g: JSON.parse('{"enable":false,"lazy":true,"owner":"codefine","repo":"gitment","oauth":{"client_id":null,"client_secret":null},"perPage":10}'),
            d: JSON.parse('{"app_id":null}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
    
    <script>
        var imageArr=[];
    </script>
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?85ac030db207eb5660d0fd7b00b2205d";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
        </script>
        


        <!-- live2d css -->
    <style>
        .live2d-widget-dialog-container {
            width: 300px;
            height: 120px;
            position: absolute;
            bottom: 65%;
            right: 0px;
            transform-origin: right;
            padding: 12px;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }
        .live2d-widget-dialog {
            width: 100%;
            height: 100%;
            color: #917159;
            font-size: 16px;
            padding: 12px;
            border: 2px solid rgb(236, 203, 180);
            background: rgb(252, 248, 244);
            box-sizing: border-box;
            border-radius: 10px;
            transform: rotate(-2deg);
            opacity: 0;
            transition: 200ms opacity;
            box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 6px, rgba(0, 0, 0, 0.12) 0px 1px 4px;
            animation: live2d-widget-dialog-tingle 4s ease-in-out 0s infinite alternate;
        }
        @keyframes live2d-widget-dialog-tingle {
            0% { transform: translate(-1px, 1.5px) rotate(-2deg); }
            100% { transform: translate(1px, -1.5px) rotate(2deg); }
        }
    </style>

    <!--- live2d js -->
    <script src="http://188.131.227.20:999/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script>
    <script>L2Dwidget.init({"pluginRootPath":"http://188.131.227.20:999/live2dw/","pluginJsPath":"http://188.131.227.20:999/lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/Epsilon2.1.model.json"},"display":{"position":"right","width":300,"height":400},"mobile":{"show":false},"log":false});</script>
    <div id="live2d-widget" class="live2d-widget-container" style="position: fixed; right: 0px; bottom: -20px; width: 300px; height: 400px; z-index: 99999; opacity: 1; pointer-events: none;"><canvas id="live2dcanvas" width="600" height="800" style="position: absolute; left: 0px; top: 0px; width: 300px; height: 400px;"></canvas></div>
    <!-- 访客统计 -->
    <script src="http://188.131.227.20:999/api/ip_locate.php"> </script>
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Anti-entropy</h5>
          <a href="mailto:1348651580@qq.com" title="1348651580@qq.com" class="mail">
            
              <span>1</span>
            
              <span>3</span>
            
              <span>4</span>
            
              <span>8</span>
            
              <span>6</span>
            
              <span>5</span>
            
              <span>1</span>
            
              <span>5</span>
            
              <span>8</span>
            
              <span>0</span>
            
              <span>@</span>
            
              <span>q</span>
            
              <span>q</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
          
              <li>
                <a href="https://github.com/anti-entropy123/" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
          <div id="binft" style=" text-align:center;"></div>
          <script>
            var binft = function (r) {
              function t() {
                return b[Math.floor(Math.random() * b.length)]
              }  
              function e() {
                return String.fromCharCode(94 * Math.random() + 33)
              }
              function n(r) {
                for (var n = document.createDocumentFragment(), i = 0; r > i; i++) {
                  var l = document.createElement("span");
                  l.textContent = e(), l.style.color = t(), n.appendChild(l)
                }
                return n
              }
              function i() {
                var t = o[c.skillI];
                c.step ? c.step-- : (c.step = g, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : "forward" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = "backward", c.delay = a) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % o.length, c.direction = "forward")), r.textContent = c.text, r.appendChild(n(c.prefixP < l.length ? Math.min(s, s + c.prefixP) : Math.min(s, t.length - c.skillP))), setTimeout(i, d)
              }
              var l = "",
              o = ["孤独是常态,", "寂寞是病态",
                   "孤独使我自由,","寂寞让我作呕",
                   "为守护所有美好而战,","向一切虚伪的美好宣战",
                   "don't be sorry,","be better",
                   "伤痕是我的勋章",
                   "但置我于低谷者,","必将助我以崛起",
                   "但置我于死地者,","必将赐我以后生",
                   "行于黑暗, 侍奉光明","万物皆虚, 万事皆允",
                   "天生我材必有用,","千金散尽还复来"
                   ].map(function (r) {
              return r + ""
              }),
              a = 2,
              g = 1,
              s = 5,
              d = 75,
              b = ["rgb(110,64,170)", "rgb(150,61,179)", "rgb(191,60,175)", "rgb(228,65,157)", "rgb(254,75,131)", "rgb(255,94,99)", "rgb(255,120,71)", "rgb(251,150,51)", "rgb(226,183,47)", "rgb(198,214,60)", "rgb(175,240,91)", "rgb(127,246,88)", "rgb(82,246,103)", "rgb(48,239,130)", "rgb(29,223,163)", "rgb(26,199,194)", "rgb(35,171,216)", "rgb(54,140,225)", "rgb(76,110,219)", "rgb(96,84,200)"],
              c = {
                text: "",
                prefixP: -s,
                skillI: 0,
                skillP: 0,
                direction: "forward",
                delay: a,
                step: g
              };
              i()
              };
              binft(document.getElementById('binft'));
          </script>
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                文章
              </a>
            </li>
        
        </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>操作系统的两次实验</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title">操作系统的两次实验</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-10-03T09:25:32.000Z" itemprop="datePublished" class="page-time">
  2019-10-03
</time>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-linux文件管理实验"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">操作系统的两次实验</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-10-03 17:25:32" datetime="2019-10-03T09:25:32.000Z"  itemprop="datePublished">2019-10-03</time>

            


            

            
    <span class="leancloud-comment">
        <i class="icon icon-comment-o"></i>
        <a href="/2019/10/03/linux文件管理实验/#comment">
            <span class="valine-comment-count" data-xid="/2019/10/03/linux文件管理实验/"></span>
        </a>
    </span>



            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p><code>linux文件管理系统实验</code> 和 <code>xv6 big file实验</code> 记录.</p>
<a id="more"></a>
<h1 id="操作系统两次实验"><a href="#操作系统两次实验" class="headerlink" title="操作系统两次实验"></a>操作系统两次实验</h1><h2 id="linux-文件管理系统实验记录"><a href="#linux-文件管理系统实验记录" class="headerlink" title="linux 文件管理系统实验记录"></a>linux 文件管理系统实验记录</h2><ul>
<li>环境 : Ubuntu 16.04 (VMware Workstation 15 pro)</li>
<li>实验目标 : 使用命令行管理文件系统</li>
</ul>
<h3 id="分配虚拟硬盘"><a href="#分配虚拟硬盘" class="headerlink" title="分配虚拟硬盘"></a>分配虚拟硬盘</h3><p>虚拟机关闭时, 在VMware的<code>编辑虚拟机设置</code>里添加两个新的硬盘, 各10G.</p>
<p>完成后可以打开虚拟机确认:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:~$ sudo fdisk -l</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 10 GiB, 10737418240 bytes, 20971520 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sdc: 10 GiB, 10737418240 bytes, 20971520 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br></pre></td></tr></table></figure>

<h3 id="创建和扩大文件系统和相关逻辑卷管理"><a href="#创建和扩大文件系统和相关逻辑卷管理" class="headerlink" title="创建和扩大文件系统和相关逻辑卷管理"></a>创建和扩大文件系统和相关逻辑卷管理</h3><h4 id="使用fdisk将sdb分出分区"><a href="#使用fdisk将sdb分出分区" class="headerlink" title="使用fdisk将sdb分出分区"></a>使用fdisk将sdb分出分区</h4><ul>
<li>sdb1:主分区, 4G  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:/dev$ sudo fdisk /dev/sdb</span><br><span class="line"></span><br><span class="line">Welcome to fdisk (util-linux 2.27.1).</span><br><span class="line">Changes will remain <span class="keyword">in</span> memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table.</span><br><span class="line">Created a new DOS disklabel with disk identifier 0x7ae8300a.</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)： n</span><br><span class="line">Partition <span class="built_in">type</span></span><br><span class="line">p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">e   extended (container <span class="keyword">for</span> logical partitions)</span><br><span class="line">Select (default p): p</span><br><span class="line">分区号 (1-4, default 1): </span><br><span class="line">First sector (2048-20971519, default 2048): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (2048-20971519, default 20971519): +4G</span><br><span class="line"></span><br><span class="line">Created a new partition 1 of <span class="built_in">type</span> <span class="string">'Linux'</span> and of size 4 GiB.</span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li>sdb2: 扩展分区, 6G.  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">命令(输入 m 获取帮助)： n</span><br><span class="line">Partition <span class="built_in">type</span></span><br><span class="line">p   primary (1 primary, 0 extended, 3 free)</span><br><span class="line">e   extended (container <span class="keyword">for</span> logical partitions)</span><br><span class="line">Select (default p): e</span><br><span class="line">分区号 (2-4, default 2): </span><br><span class="line">First sector (8390656-20971519, default 8390656): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (8390656-20971519, default 20971519): </span><br><span class="line"></span><br><span class="line">Created a new partition 2 of <span class="built_in">type</span> <span class="string">'Extended'</span> and of size 6 GiB.</span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li>sdb5, sdb6逻辑分区, 各3G  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">命令(输入 m 获取帮助)： n</span><br><span class="line">All space <span class="keyword">for</span> primary partitions is <span class="keyword">in</span> use.</span><br><span class="line">Adding logical partition 5</span><br><span class="line">First sector (8392704-20971519, default 8392704): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (8392704-20971519, default 20971519): +3G</span><br><span class="line"></span><br><span class="line">Created a new partition 5 of <span class="built_in">type</span> <span class="string">'Linux'</span> and of size 3 GiB.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)： n</span><br><span class="line">All space <span class="keyword">for</span> primary partitions is <span class="keyword">in</span> use.</span><br><span class="line">Adding logical partition 6</span><br><span class="line">First sector (14686208-20971519, default 14686208): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (14686208-20971519, default 20971519): +3G</span><br><span class="line"></span><br><span class="line">Created a new partition 6 of <span class="built_in">type</span> <span class="string">'Linux'</span> and of size 3 GiB.</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)： w</span><br><span class="line"></span><br><span class="line">The partition table has been altered.</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="将sdb6-和-sdc-初始化为物理卷-PV"><a href="#将sdb6-和-sdc-初始化为物理卷-PV" class="headerlink" title="将sdb6 和 sdc 初始化为物理卷(PV)"></a>将sdb6 和 sdc 初始化为物理卷(PV)</h4><p>这里有个小插曲, 我的机器中 pvcreate 工具没有安装.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:/dev$ sudo pvcreate /dev/sdb6</span><br><span class="line">sudo: pvcreate：找不到命令</span><br><span class="line"><span class="comment"># 安装 lvm2 即可</span></span><br><span class="line">yjn@yjn-virtual-machine:/dev$ sudo apt-get install lvm2</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:/dev$ sudo pvcreate /dev/sdb6</span><br><span class="line">  Physical volume <span class="string">"/dev/sdb6"</span> successfully created.</span><br><span class="line">yjn@yjn-virtual-machine:/dev$ sudo pvcreate /dev/sdc</span><br><span class="line">  Physical volume <span class="string">"/dev/sdc"</span> successfully createdyjn</span><br><span class="line">  </span><br><span class="line">@yjn-virtual-machine:/dev$ sudo pvs</span><br><span class="line">PV         VG Fmt  Attr PSize  PFree </span><br><span class="line">/dev/sdb6     lvm2 ---  &lt;3.00g &lt;3.00g</span><br><span class="line">/dev/sdc      lvm2 ---  10.00g 10.00g</span><br></pre></td></tr></table></figure>

<h4 id="将-sdb6-和-sdc-加入卷组-VG-vg00-中"><a href="#将-sdb6-和-sdc-加入卷组-VG-vg00-中" class="headerlink" title="将 sdb6 和 sdc 加入卷组(VG) vg00 中"></a>将 sdb6 和 sdc 加入卷组(VG) vg00 中</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:/dev$ sudo vgcreate vg00 /dev/sdb6</span><br><span class="line">  Volume group <span class="string">"vg00"</span> successfully created</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:/dev$ sudo vgex vg00 </span><br><span class="line">vgexport  vgextend  </span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:/dev$ sudo vgextend vg00 /dev/sdc </span><br><span class="line">  Volume group <span class="string">"vg00"</span> successfully extended</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:/dev$ sudo vgs</span><br><span class="line">  VG   <span class="comment">#PV #LV #SN Attr   VSize  VFree </span></span><br><span class="line">  vg00   2   0   0 wz--n- 12.99g 12.99g</span><br></pre></td></tr></table></figure>

<h4 id="在vg00-中创建逻辑卷-LV-lv00-初始大小为-10G"><a href="#在vg00-中创建逻辑卷-LV-lv00-初始大小为-10G" class="headerlink" title="在vg00 中创建逻辑卷(LV)lv00, 初始大小为 10G"></a>在vg00 中创建逻辑卷(LV)lv00, 初始大小为 10G</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:/dev$ sudo vgs</span><br><span class="line">  VG   <span class="comment">#PV #LV #SN Attr   VSize  VFree </span></span><br><span class="line">  vg00   2   0   0 wz--n- 12.99g 12.99g</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:/dev$ sudo lvcreate -L 10G -n lv00 /dev/vg00</span><br><span class="line">  Logical volume <span class="string">"lv00"</span> created.</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:/dev$ sudo lvs</span><br><span class="line">  LV   VG   Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  lv00 vg00 -wi<span class="_">-a</span>----- 10.00g</span><br></pre></td></tr></table></figure>

<h4 id="在lv00-中创建文件系统并装载"><a href="#在lv00-中创建文件系统并装载" class="headerlink" title="在lv00 中创建文件系统并装载"></a>在lv00 中创建文件系统并装载</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:/dev$ sudo mkfs.ext4 /dev/vg00/lv00</span><br><span class="line">mke2fs 1.42.13 (17-May-2015)</span><br><span class="line">Creating filesystem with 2621440 4k blocks and 655360 inodes</span><br><span class="line">Filesystem UUID: 0cb50d90-490e-4413-b702-1187b48d10fc</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632</span><br><span class="line"></span><br><span class="line">Allocating group tables: 完成                            </span><br><span class="line">正在写入inode表: 完成                            </span><br><span class="line">Creating journal (32768 blocks): 完成</span><br><span class="line">Writing superblocks and filesystem accounting information: 完成 </span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS$ sudo mkdir data</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS$ sudo mount /dev/vg00/lv00 data</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ ls</span><br><span class="line">lost+found</span><br></pre></td></tr></table></figure>

<p>我将文件系统挂在了 <code>OS/data/</code> 这个文件夹中.</p>
<h4 id="在文件系统中创建一个-8G-的大文件"><a href="#在文件系统中创建一个-8G-的大文件" class="headerlink" title="在文件系统中创建一个 8G 的大文件"></a>在文件系统中创建一个 8G 的大文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo dd <span class="keyword">if</span>=/dev/zero of=/home/yjn/OS/data/bigfile1 bs=1M count=8192</span><br><span class="line">记录了8192+0 的读入</span><br><span class="line">记录了8192+0 的写出</span><br><span class="line">8589934592 bytes (8.6 GB, 8.0 GiB) copied, 12.1378 s, 708 MB/s</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ ls -lh</span><br><span class="line">总用量 8.1G</span><br><span class="line">-rw-r--r-- 1 root root 8.0G 10月  3 18:29 bigfile1</span><br><span class="line">drwx------ 2 root root  16K 10月  3 18:24 lost+found</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ df -h</span><br><span class="line">文件系统               容量  已用  可用 已用% 挂载点</span><br><span class="line">udev                   1.5G     0  1.5G    0% /dev</span><br><span class="line">tmpfs                  300M  8.9M  291M    3% /run</span><br><span class="line">/dev/sda1               17G  4.6G   12G   30% /</span><br><span class="line">tmpfs                  1.5G  132K  1.5G    1% /dev/shm</span><br><span class="line">tmpfs                  5.0M  4.0K  5.0M    1% /run/lock</span><br><span class="line">tmpfs                  1.5G     0  1.5G    0% /sys/fs/cgroup</span><br><span class="line">tmpfs                  300M   40K  300M    1% /run/user/1000</span><br><span class="line">/dev/mapper/vg00-lv00  9.8G  8.1G  1.2G   88% /home/yjn/OS/data</span><br></pre></td></tr></table></figure>

<h4 id="扩大lv-逻辑卷-和fs-文件系统"><a href="#扩大lv-逻辑卷-和fs-文件系统" class="headerlink" title="扩大lv(逻辑卷)和fs(文件系统)"></a>扩大lv(逻辑卷)和fs(文件系统)</h4><p>假如现在又要一个大文件bigfile2, 大小为3G, 文件系统不够大了, 需要扩大lv 和 fs.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo lvextend -L 12G /dev/vg00/lv00</span><br><span class="line">  Size of logical volume vg00/lv00 changed from 10.00 GiB (2560 extents) to 12.00 GiB (3072 extents).</span><br><span class="line">  Logical volume vg00/lv00 successfully resized.</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo resize2fs /dev/vg00/lv00</span><br><span class="line">resize2fs 1.42.13 (17-May-2015)</span><br><span class="line">Filesystem at /dev/vg00/lv00 is mounted on /home/yjn/OS/data; on-line resizing required</span><br><span class="line">old_desc_blocks = 1, new_desc_blocks = 1</span><br><span class="line">The filesystem on /dev/vg00/lv00 is now 3145728 (4k) blocks long.</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ df -h</span><br><span class="line">文件系统               容量  已用  可用 已用% 挂载点</span><br><span class="line">udev                   1.5G     0  1.5G    0% /dev</span><br><span class="line">tmpfs                  300M  8.9M  291M    3% /run</span><br><span class="line">/dev/sda1               17G  4.6G   12G   30% /</span><br><span class="line">tmpfs                  1.5G  132K  1.5G    1% /dev/shm</span><br><span class="line">tmpfs                  5.0M  4.0K  5.0M    1% /run/lock</span><br><span class="line">tmpfs                  1.5G     0  1.5G    0% /sys/fs/cgroup</span><br><span class="line">tmpfs                  300M   40K  300M    1% /run/user/1000</span><br><span class="line">/dev/mapper/vg00-lv00   12G  8.1G  3.1G   73% /home/yjn/OS/data</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo dd <span class="keyword">if</span>=/dev/zero of=bigfile2 bs=1M count=3096</span><br><span class="line">记录了3096+0 的读入</span><br><span class="line">记录了3096+0 的写出</span><br><span class="line">3246391296 bytes (3.2 GB, 3.0 GiB) copied, 1.92041 s, 1.7 GB/s</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ ls -lh</span><br><span class="line">总用量 12G</span><br><span class="line">-rw-r--r-- 1 root root 8.0G 10月  3 18:29 bigfile1</span><br><span class="line">-rw-r--r-- 1 root root 3.1G 10月  3 18:34 bigfile2</span><br><span class="line">drwx------ 2 root root  16K 10月  3 18:24 lost+found</span><br></pre></td></tr></table></figure>

<h4 id="扩大pv-物理卷"><a href="#扩大pv-物理卷" class="headerlink" title="扩大pv(物理卷)"></a>扩大pv(物理卷)</h4><p>假如又要在放一个文件bigfile3, 大小为3G, 那么, pv中的剩余空间也不够了. 需要先扩pv, 再扩lv 和 fs.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo pvcreate /dev/sdb5</span><br><span class="line">  Physical volume <span class="string">"/dev/sdb5"</span> successfully created.</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo vgextend vg00 /dev/sdb5</span><br><span class="line">  Volume group <span class="string">"vg00"</span> successfully extended</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo vgs</span><br><span class="line">  VG   <span class="comment">#PV #LV #SN Attr   VSize   VFree </span></span><br><span class="line">  vg00   3   1   0 wz--n- &lt;15.99g &lt;3.99g</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo lvextend -L 15.5G /dev/vg00/lv00</span><br><span class="line">  Size of logical volume vg00/lv00 changed from 12.00 GiB (3072 extents) to 15.50 GiB (3968 extents).</span><br><span class="line">  Logical volume vg00/lv00 successfully resized.</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo resize2fs /dev/vg00/lv00</span><br><span class="line">resize2fs 1.42.13 (17-May-2015)</span><br><span class="line">Filesystem at /dev/vg00/lv00 is mounted on /home/yjn/OS/data; on-line resizing required</span><br><span class="line">old_desc_blocks = 1, new_desc_blocks = 1</span><br><span class="line">The filesystem on /dev/vg00/lv00 is now 4063232 (4k) blocks long.</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ df -h</span><br><span class="line">文件系统               容量  已用  可用 已用% 挂载点</span><br><span class="line">udev                   1.5G     0  1.5G    0% /dev</span><br><span class="line">tmpfs                  300M  8.9M  291M    3% /run</span><br><span class="line">/dev/sda1               17G  4.6G   12G   30% /</span><br><span class="line">tmpfs                  1.5G  132K  1.5G    1% /dev/shm</span><br><span class="line">tmpfs                  5.0M  4.0K  5.0M    1% /run/lock</span><br><span class="line">tmpfs                  1.5G     0  1.5G    0% /sys/fs/cgroup</span><br><span class="line">tmpfs                  300M   40K  300M    1% /run/user/1000</span><br><span class="line">/dev/mapper/vg00-lv00   16G   12G  3.4G   77% /home/yjn/OS/data</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo dd <span class="keyword">if</span>=/dev/zero of=/home/yjn/OS/data/bigfile3 bs=1M count=3096</span><br><span class="line">记录了3096+0 的读入</span><br><span class="line">记录了3096+0 的写出</span><br><span class="line">3246391296 bytes (3.2 GB, 3.0 GiB) copied, 2.03317 s, 1.6 GB/s</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ ls -lh</span><br><span class="line">总用量 15G</span><br><span class="line">-rw-r--r-- 1 root root 8.0G 10月  3 18:29 bigfile1</span><br><span class="line">-rw-r--r-- 1 root root 3.1G 10月  3 18:34 bigfile2</span><br><span class="line">-rw-r--r-- 1 root root 3.1G 10月  3 18:42 bigfile3</span><br><span class="line">drwx------ 2 root root  16K 10月  3 18:24 lost+found</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ df -h ../data/</span><br><span class="line">文件系统               容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/vg00-lv00   16G   15G  313M   98% /home/yjn/OS/data</span><br></pre></td></tr></table></figure>

<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>我们使用了由 sdb5(3GB), sdb6(&lt;3GB), sdc(10GB) 组成的卷组 vg00, 大小为 &lt;16GB.</p>
<p>在其中创建了一个大小为15.5GB的逻辑卷lv00, 此逻辑卷中创建了大小为15.5GB大小的文件系统, 并存放了 bigfile1(8G), bigfile2(3G), bigfile3(3G) 共14G的数据的三个大文件. </p>
<p>经测试, 文件系统随时可以扩大.</p>
<h3 id="缩小文件系统和相关的逻辑卷管理"><a href="#缩小文件系统和相关的逻辑卷管理" class="headerlink" title="缩小文件系统和相关的逻辑卷管理"></a>缩小文件系统和相关的逻辑卷管理</h3><h4 id="删除文件-卸载文件系统"><a href="#删除文件-卸载文件系统" class="headerlink" title="删除文件, 卸载文件系统"></a>删除文件, 卸载文件系统</h4><p>删除bigfile2, bigfile3, unmount文件系统, 为缩小文件系统做准备.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:~/OS/data$ sudo rm bigfile2 bigfile3</span><br><span class="line">[sudo] yjn 的密码： </span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ ls</span><br><span class="line">bigfile1  lost+found</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~/OS/data$ <span class="built_in">cd</span> </span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~$ sudo umount /home/yjn/OS/data </span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~$ sudo e2fsck -f /dev/vg00/lv00 </span><br><span class="line">e2fsck 1.42.13 (17-May-2015)</span><br><span class="line">第一步: 检查inode,块,和大小</span><br><span class="line">第二步: 检查目录结构</span><br><span class="line">第3步: 检查目录连接性</span><br><span class="line">Pass 4: Checking reference counts</span><br><span class="line">第5步: 检查簇概要信息</span><br><span class="line">/dev/vg00/lv00: 12/1015808 files (0.0% non-contiguous), 2200073/4063232 blocks</span><br></pre></td></tr></table></figure>

<h4 id="缩小文件系统以及逻辑卷"><a href="#缩小文件系统以及逻辑卷" class="headerlink" title="缩小文件系统以及逻辑卷"></a>缩小文件系统以及逻辑卷</h4><p>缩小文件系统时, 我再次遇到了问题 :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:~$ sudo resize2fs /dev/vg00/lv00 10G</span><br><span class="line">resize2fs 1.42.13 (17-May-2015)</span><br><span class="line">resize2fs: New size smaller than minimum (2660232)</span><br></pre></td></tr></table></figure>


<p>我也头一次听说原来文件系统是有最小值的.</p>
<p>那么, 根据它的最小值提示, 经过计算应约为10.14G大小.</p>
<p>在使用 resize2fs 工具时可以加上选项 -M, 就会将文件系统直接缩小到最小值.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">yjn@yjn-virtual-machine:~$ sudo resize2fs -M /dev/vg00/lv00</span><br><span class="line">resize2fs 1.42.13 (17-May-2015)</span><br><span class="line">Resizing the filesystem on /dev/vg00/lv00 to 2660232 (4k) blocks.</span><br><span class="line">The filesystem on /dev/vg00/lv00 is now 2660232 (4k) blocks long.</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~$ sudo lvreduce -L 11G /dev/vg00/lv00</span><br><span class="line">  WARNING: Reducing active logical volume to 11.00 GiB.</span><br><span class="line">  THIS MAY DESTROY YOUR DATA (filesystem etc.)</span><br><span class="line">Do you really want to reduce vg00/lv00? [y/n]: y</span><br><span class="line">  Size of logical volume vg00/lv00 changed from 15.50 GiB (3968 extents) to 11.00 GiB (2816 extents).</span><br><span class="line">  Logical volume vg00/lv00 successfully resized.</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~$ sudo mount /dev/vg00/lv00 /home/yjn/OS/data/</span><br><span class="line"></span><br><span class="line">yjn@yjn-virtual-machine:~$ df -h /home/yjn/OS/data/</span><br><span class="line">文件系统               容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/vg00-lv00  9.9G  8.1G  1.4G   86% /home/yjn/OS/data</span><br><span class="line">yjn@yjn-virtual-machine:~$</span><br></pre></td></tr></table></figure>

<h2 id="bigger-files-for-xv6"><a href="#bigger-files-for-xv6" class="headerlink" title="bigger files for xv6"></a>bigger files for xv6</h2><p><a href="https://pdos.csail.mit.edu/6.828/2018/homework/xv6-big-files.html" target="_blank" rel="noopener">MIT 作业要求</a></p>
<h3 id="关于实验的一些概括性描述"><a href="#关于实验的一些概括性描述" class="headerlink" title="关于实验的一些概括性描述"></a>关于实验的一些概括性描述</h3><ul>
<li>实验目标 : 增加 xv6 文件的最大大小由约 70kB 到约 8.5MB.</li>
<li>实验环境 : Ubuntu 16.04 TLS</li>
<li>大体思路 :<br>xv6文件最大大小为 70KB 的原因是其 inode 包含12个 “直接” 指针和一个 “单一间接” 指针.<br>而xv6的每个数据块为 512B, 所以间接指针指向了共 512/4 = 128 个二级指针. 这样就总共有 128 + 12 = 140 个指针.<br>又因为每个指针都指向了一个512B大小的数据块. 所以就有 140 * 512 = 71680 B = 70KB 大小的文件.<br>那么要怎么实现增大最大大小呢?<br>只需要修改 <code>fs.c</code> 这个文件中的<code>bmap()</code>, 来实现原来的第十二个指针由直接指针改成一级间接指针, 原来的第十三个指针由一级间接指针改成二级间接指针.<br>这样, 指针的总数就是 11 + 128 + 128*128 = 16523 个, 它们指向的数据块的总大小就是 16523 * 512 = 8459776 B = 8.4 MB</li>
</ul>
<h3 id="安装-“big-工具”"><a href="#安装-“big-工具”" class="headerlink" title="安装 “big 工具”"></a>安装 “big 工具”</h3><p>在这次实验中, 需要一个能验证文件大小的方法. 所以这里需要做一些前期工作.</p>
<figure class="image-box">
                <a rel=操作系统的两次实验 href="https://hexo-blog-1258787237.cos.ap-beijing.myqcloud.com/hexo-img/preliminaries.png" title="" data-fancybox="images"><img src="https://hexo-blog-1258787237.cos.ap-beijing.myqcloud.com/hexo-img/preliminaries.png" alt title class></a>
                <p></p>
            </figure>

<ol>
<li><p>在 <code>Makefile</code> 中修改<code>CPUS := 2</code> 为 <code>CPUS := 1</code>, 并在<code>QEMUOPTS</code>的前一行加入<code>QEMUEXTRA = -snapshot</code>.</p>
</li>
<li><p>修改 <code>param.h</code> 中的参数<code>FSSIZE</code>为<br><code>#define FSSIZE       20000  // size of file system in blocks</code></p>
</li>
<li><p>下载 <a href="https://pdos.csail.mit.edu/6.828/2018/homework/big.c" target="_blank" rel="noopener">big.c</a> 至 xv6 目录, 并在 Makefile 文件的 UPROGS 列表的末尾加入<code>_big\</code>.</p>
</li>
<li><p>在 xv6 目录输入 <code>make qemu</code> 编译并运行 xv6. 输入 big ,若显示140个blocks则表明成功.</p>
</li>
</ol>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2019-10-04T04:49:07.075Z" itemprop="dateUpdated">2019-10-04 12:49:07</time>
</span><br>


        
        转载注明出处，原文地址：<a href="/2019/10/03/linux文件管理实验/" target="_blank" rel="external">https://tjuyjn.top/2019/10/03/linux文件管理实验/</a>
        
    </div>
    <footer>
        <a href="https://tjuyjn.top">
            <img src="/img/avatar.jpg" alt="Anti-entropy">
            Anti-entropy
        </a>
    </footer>
</blockquote>

        
            <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>

            
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OS/">OS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/文件系统/">文件系统</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://tjuyjn.top/2019/10/03/linux文件管理实验/&title=《操作系统的两次实验》 — Anti-entropy's blog&pic=https://tjuyjn.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://tjuyjn.top/2019/10/03/linux文件管理实验/&title=《操作系统的两次实验》 — Anti-entropy's blog&source=linux文件管理系统实验 和 xv6 big file实验 记录." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://tjuyjn.top/2019/10/03/linux文件管理实验/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《操作系统的两次实验》 — Anti-entropy's blog&url=https://tjuyjn.top/2019/10/03/linux文件管理实验/&via=https://tjuyjn.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://tjuyjn.top/2019/10/03/linux文件管理实验/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            
    <div id="comment"></div>



        
    </div>
    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="next">
      <a href="/2019/09/25/杂篇/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">杂篇</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#操作系统两次实验"><span class="post-toc-number">1.</span> <span class="post-toc-text">操作系统两次实验</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#linux-文件管理系统实验记录"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">linux 文件管理系统实验记录</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#分配虚拟硬盘"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">分配虚拟硬盘</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建和扩大文件系统和相关逻辑卷管理"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">创建和扩大文件系统和相关逻辑卷管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用fdisk将sdb分出分区"><span class="post-toc-number">1.1.2.1.</span> <span class="post-toc-text">使用fdisk将sdb分出分区</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#将sdb6-和-sdc-初始化为物理卷-PV"><span class="post-toc-number">1.1.2.2.</span> <span class="post-toc-text">将sdb6 和 sdc 初始化为物理卷(PV)</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#将-sdb6-和-sdc-加入卷组-VG-vg00-中"><span class="post-toc-number">1.1.2.3.</span> <span class="post-toc-text">将 sdb6 和 sdc 加入卷组(VG) vg00 中</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在vg00-中创建逻辑卷-LV-lv00-初始大小为-10G"><span class="post-toc-number">1.1.2.4.</span> <span class="post-toc-text">在vg00 中创建逻辑卷(LV)lv00, 初始大小为 10G</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在lv00-中创建文件系统并装载"><span class="post-toc-number">1.1.2.5.</span> <span class="post-toc-text">在lv00 中创建文件系统并装载</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在文件系统中创建一个-8G-的大文件"><span class="post-toc-number">1.1.2.6.</span> <span class="post-toc-text">在文件系统中创建一个 8G 的大文件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#扩大lv-逻辑卷-和fs-文件系统"><span class="post-toc-number">1.1.2.7.</span> <span class="post-toc-text">扩大lv(逻辑卷)和fs(文件系统)</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#扩大pv-物理卷"><span class="post-toc-number">1.1.2.8.</span> <span class="post-toc-text">扩大pv(物理卷)</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#小结"><span class="post-toc-number">1.1.2.9.</span> <span class="post-toc-text">小结</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#缩小文件系统和相关的逻辑卷管理"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">缩小文件系统和相关的逻辑卷管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#删除文件-卸载文件系统"><span class="post-toc-number">1.1.3.1.</span> <span class="post-toc-text">删除文件, 卸载文件系统</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#缩小文件系统以及逻辑卷"><span class="post-toc-number">1.1.3.2.</span> <span class="post-toc-text">缩小文件系统以及逻辑卷</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#bigger-files-for-xv6"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">bigger files for xv6</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#关于实验的一些概括性描述"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">关于实验的一些概括性描述</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装-“big-工具”"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">安装 “big 工具”</span></a></li></ol></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

    <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        我们一起来让这个世界有趣一点
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/reward-wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>

    

</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://www.lujingtao.com" target="_blank">主题作者</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.tjuscswyz.cn/" target="_blank">p4ssw0rd</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/ever17/" target="_blank">Ever17</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/tkj521Ya/" target="_blank">Exaggerate~</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/jason1999/" target="_blank">jason1999</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://tjublesson.top/" target="_blank">blesson</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://glimmerzcy.github.io" target="_blank">ZCY</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/Harry____" target="_blank">Harry____</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://deamon.tjunsa.com" target="_blank">deamon</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
        <p>
            <span>
                Anti-entropy &copy; 2019
            </span>
        		
           	
            
            
            
            

            
                
<span class="site-uv" title="总访客量">
    <i class="icon icon-user"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>


<span class="site-pv" title="总访问量">
    <i class="icon icon-eye"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>

            
        </p>
    </div>
</footer>

    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://tjuyjn.top/2019/10/03/linux文件管理实验/&title=《操作系统的两次实验》 — Anti-entropy's blog&pic=https://tjuyjn.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://tjuyjn.top/2019/10/03/linux文件管理实验/&title=《操作系统的两次实验》 — Anti-entropy's blog&source=linux文件管理系统实验 和 xv6 big file实验 记录." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://tjuyjn.top/2019/10/03/linux文件管理实验/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《操作系统的两次实验》 — Anti-entropy's blog&url=https://tjuyjn.top/2019/10/03/linux文件管理实验/&via=https://tjuyjn.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://tjuyjn.top/2019/10/03/linux文件管理实验/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACK0lEQVR42u3ay44iMQwFUP7/p2lpVtMLUtd20VIlJyuEIMlhYcqP1yte739r/f769f/r0z7rz9ywMDAwHst4L9f6WslVksvlP8HH3TAwMA5g3LX1+idIwuv6ux/fx8DAwAiCaRIWq1fEwMDAmG9XPaya6GJgYGBUk9hqYO2F8q/n4hgYGA9kVBsDf/n6i/0NDAyMhzDerTUvxs0T41/fwsDA2JqRtxjzWDdJYtcPlxc3xMDAOIyxHpXoPdLlyDxZvQi4GBgYWzAmg1zVoNlrakZ/AxgYGFsz8uOrR/bGLNYh/mIHDAyMIxnVIYm7Gg/VEh4GBsYJjMl2eemtl8o2S4QYGBgbMXphtFrEr56SfwYDA+MERu/SeUEtH9eYtxkwMDB2ZXxj0/y61WT4YroNAwNjU0avtVltMeatzckYGQYGxq6MPEXMH/KS8lxvn4tHQwwMjK0ZvSA7T3qT4BudgoGBcSRjfaH8cbC6emMZGBgYezN6pbS7ynO94lphug0DA2M7Rl786jUm57DXJMZjYGBsx5iktUmJP0mhk1MwMDDOYVRbj5OktzpgcUNoxsDAeDijVw6btDATRnnUAwMDY2tGNczddVivbDcP1hgYGM9l9IpoSdBMks9eshrl4hgYGNsx8uQzL7T1CnN5+hp1YjEwMI5kTEh5GC0/z2JgYGDEl6tetPdjYWBgnMmohss8IPb2L/dgMTAwtmZUGwN5wL1rXOM2EgYGxvMYP5Bn+gio9T66AAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.4.2"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.4.2"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.js"></script>

<script type="text/javascript" src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.4.2"></script>
<script type="text/javascript" src="/js/blog.js?v=1.4.2"></script>

<!-- third-party -->






<script type="text/javascript" src="/js/plugins/local_search.js?v=1.4.2"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    
        <script type="text/javascript" src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script type="text/javascript" src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript" src="/js/plugins/valine.js?v=1.4.2"></script>
    
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>




    <script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = '不要离开我！';
                clearTimeout(titleTime);
            } else {
                document.title = '嘤嘤嘤!太好了~';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>





    
    <script type="text/javascript">           
        /* 鼠标特效 */ 
        var a_idx = 0; 
        jQuery(document).ready(function($) { 
            $("body").click(function(e) { 
                var a = new Array("❤富强❤","❤民主❤","❤文明❤","❤和谐❤","❤自由❤","❤平等❤","❤公正❤","❤法治❤","❤爱国❤","❤敬业❤","❤诚信❤","❤友善❤"); 
                var $i = $("<span></span>").text(a[a_idx]); 
                a_idx = (a_idx + 1) % a.length; 
                var x = e.pageX, 
                y = e.pageY; 
                $i.css({ 
                    "z-index": 999999999999999999999999999999999999999999999999999999999999999999999, 
                    "top": y - 20, 
                    "left": x, 
                    "position": "absolute", 
                    "font-weight": "bold", 
                    "color": "rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")" 
                }); 
                $("body").append($i); 
                $i.animate({ 
                    "top": y - 180, 
                    "opacity": 0 
                }, 
                1500, 
                function() { 
                    $i.remove(); 
                }); 
            }); 
        }); 
    </script>
    <!--动态线条背景-->
    <script type="text/javascript" color="30,144,255" opacity='0.7' zIndex="-2" count="150" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>

   

</body>
</html>
